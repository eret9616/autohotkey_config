# AutoHotkey 按键映射诊断指南

## 问题分析

你遇到的问题：按 F2 和 F3 输出 "ab"

**可能的原因：**

1. **多个脚本冲突** - 你有两个脚本都定义了 F2/F3 映射：

   - `redmibookpro.ahk`
   - `myscript.ahk`

2. **其他软件干扰** - 可能有其他键盘映射软件在运行

3. **键盘硬件问题** - 键盘本身可能有问题

## 诊断步骤

### 1. 运行按键查看器

```bash
# 在当前目录运行
key_viewer.ahk
```

这个工具会：

- ✅ 显示你按下的每个按键的详细信息
- ✅ 检测当前运行的 AutoHotkey 脚本
- ✅ 显示 F2/F3 的映射冲突警告
- ✅ 查看完整的按键历史（按 F12）

### 2. 检查运行的脚本

在按键查看器中点击"检查运行的脚本"按钮，查看是否有多个 AutoHotkey 脚本同时运行。

### 3. 测试按键

1. 运行 `key_viewer.ahk`
2. 按下 F2 键
3. 查看显示的信息：
   - 如果显示 "F2"，说明按键本身正常
   - 如果显示 "a"，说明在 AutoHotkey 之前就被映射了
   - 查看映射信息区域的冲突警告

### 4. 临时禁用其他脚本

关闭所有其他 AutoHotkey 脚本，只保留 `key_viewer.ahk` 运行，然后测试 F2/F3 是否正常。

## 解决方案

### 方案 1：合并脚本（推荐）

由于 `redmibookpro.ahk` 和 `myscript.ahk` 有重复的映射，建议：

1. 只运行一个脚本（推荐 `redmibookpro.ahk`，因为它更新且功能更全）
2. 或者删除其中一个脚本中的重复映射

### 方案 2：检查其他软件

如果按键查看器显示按键已经被映射为 "a" 或 "b"，可能是：

- 其他键盘映射软件（如 PowerToys、SharpKeys 等）
- 键盘驱动程序的宏设置
- 游戏软件的按键绑定

### 方案 3：使用 AutoHotkey 内置工具

右键点击系统托盘中的 AutoHotkey 图标，选择：

- "Open" → 查看脚本源码
- "List Lines" → 查看最近执行的代码行
- "List Variables" → 查看变量状态
- "List Hotkeys" → 查看所有热键定义

## 其他有用的工具

### Windows 内置工具

- **屏幕键盘** (osk.exe) - 可以看到按键是否被正确识别
- **事件查看器** - 查看系统级别的键盘事件

### 第三方工具

- **Key-n-Stroke** - 实时显示按键
- **Keyboard Test Utility** - 测试键盘硬件
- **PassMark KeyboardTest** - 专业键盘测试工具

## 快速修复

如果确认是脚本冲突，最简单的方法：

1. 关闭所有 AutoHotkey 脚本
2. 只运行 `redmibookpro.ahk`
3. 测试 F2/F3 是否正常工作

## 联系信息

如果问题仍未解决，请提供：

1. `key_viewer.ahk` 显示的按键信息
2. "检查运行的脚本" 的结果
3. 按 F12 后的按键历史截图
